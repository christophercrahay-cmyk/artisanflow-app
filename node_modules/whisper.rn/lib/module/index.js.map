{"version":3,"names":["NativeEventEmitter","DeviceEventEmitter","Platform","Image","RNWhisper","AudioSessionIos","version","jsiWhisperTranscribeData","jsiWhisperVadDetectSpeech","jsiInstalled","installJSIBindingsIfNeeded","installJSIBindings","then","global","whisperTranscribeData","whisperVadDetectSpeech","catch","e","console","warn","EventEmitter","OS","EVENT_ON_TRANSCRIBE_PROGRESS","EVENT_ON_TRANSCRIBE_NEW_SEGMENTS","EVENT_ON_NATIVE_LOG","EVENT_ON_REALTIME_TRANSCRIBE","EVENT_ON_REALTIME_TRANSCRIBE_END","logListeners","_RNWhisper$toggleNati","_RNWhisper$toggleNati2","_RNWhisper$toggleNati3","addListener","evt","forEach","listener","level","text","toggleNativeLog","call","updateAudioSession","setting","setCategory","category","options","mode","setMode","setActive","active","WhisperContext","gpu","reasonNoGPU","constructor","_ref","contextPtr","contextId","ptr","id","transcribeWithNativeMethod","method","data","arguments","length","undefined","jobId","Math","floor","random","onProgress","onNewSegments","rest","progressListener","lastProgress","progress","removeProgressListener","remove","newSegmentsListener","result","removeNewSegmenetsListener","stop","abortTranscribe","promise","isAborted","transcribe","filePathOrBase64","path","source","resolveAssetSource","uri","Error","startsWith","slice","transcribeData","ArrayBuffer","transcribeDataArrayBuffer","jsiOptions","error","transcribeRealtime","lastTranscribePayload","slices","sliceIndex","tOffset","putSlice","payload","isUseSlices","_slices$sliceIndex","_segments","segments","t1","map","segment","t0","mergeSlicesIfNeeded","mergedPayload","_mergedPayload$data","_slice$data","_mergedPayload$data2","_slice$data2","processTime","recordingTime","prevAudioSession","audioSessionOnStartIos","audioSessionOnStopIos","categoryResult","getCurrentCategory","getCurrentMode","startRealtimeTranscribe","subscribe","callback","transcribeListener","endListener","lastPayload","isCapturing","bench","maxThreads","config","nThreads","encodeMs","decodeMs","batchMs","promptMs","JSON","parse","release","releaseContext","coreMLModelAssetPaths","initWhisper","_ref2","filePath","coreMLModelAsset","isBundleAsset","useGpu","useCoreMLIos","useFlashAttn","coreMLAssets","filename","assets","asset","filepath","find","p","includes","filter","initContext","downloadCoreMLAssets","__DEV__","releaseAllWhisper","releaseAllContexts","libVersion","useCoreML","coreMLAllowFallback","_RNWhisper$getConstan","getConstants","isUseCoreML","isCoreMLAllowFallback","WhisperVadContext","_ref3","detectSpeech","vadDetectSpeech","vadDetectSpeechFile","detectSpeechData","audioData","releaseVadContext","initWhisperVad","_ref4","initVadContext","releaseAllWhisperVad","releaseAllVadContexts","logInitialized","enabled","addNativeLogListener","push","splice","indexOf"],"sourceRoot":"../../src","sources":["index.ts"],"mappings":"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"}
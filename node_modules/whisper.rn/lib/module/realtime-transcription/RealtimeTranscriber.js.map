{"version":3,"names":["SliceManager","WavFileWriter","VAD_PRESETS","RealtimeTranscriber","callbacks","isActive","isTranscribing","vadEnabled","transcriptionQueue","accumulatedData","Uint8Array","wavFileWriter","lastSpeechDetectedTime","lastVadState","lastStatsSnapshot","transcriptionResults","Map","vadEvents","constructor","dependencies","options","arguments","length","undefined","whisperContext","vadContext","audioStream","fs","audioSliceSec","audioMinSec","maxSlicesInMemory","vadOptions","default","vadPreset","autoSliceOnSpeechEnd","autoSliceThreshold","transcribeOptions","initialPrompt","promptPreviousSlices","audioOutputPath","logger","sliceManager","onData","handleAudioData","bind","onError","handleError","onStatusChange","handleAudioStatusChange","start","Error","_this$callbacks$onSta","_this$callbacks","_this$options$audioSt4","_this$options$audioSt5","_this$options$audioSt6","_this$options$audioSt7","_this$options$audioSt8","call","reset","_this$options$audioSt","_this$options$audioSt2","_this$options$audioSt3","sampleRate","audioStreamConfig","channels","bitsPerSample","initialize","audioSource","bufferSize","emitStatsUpdate","log","error","_this$callbacks$onSta2","_this$callbacks2","stop","_this$callbacks$onSta3","_this$callbacks3","processAccumulatedDataForSliceManagement","processTranscriptionQueue","finalize","streamData","appendAudioData","data","catch","accumulateAudioData","errorMessage","message","newData","combined","set","minBufferSamples","result","addAudioData","slice","index","processSliceVAD","queueSliceForTranscription","checkAutoSlice","vadEvent","_slice","shouldTriggerAutoSlice","type","currentSliceInfo","getCurrentSliceInfo","currentSlice","getSliceByIndex","currentSliceIndex","currentDuration","Date","now","startTime","targetDuration","minDuration","meetsMinDuration","meetsThreshold","toFixed","nextSlice","_this$callbacks$onVad","_this$callbacks4","audioData","getAudioDataForTranscription","detectSpeech","timestamp","onVad","isSpeech","isSpeechEnd","speechDuration","onBeginTranscribe","shouldTranscribe","sliceIndex","duration","get","unshift","currentTimestamp","vadEventType","confidence","audioBuffer","buffer","vadSegments","detectSpeechData","_vadSegments","totalTime","reduce","sum","segment","t1","t0","audioDuration","Math","min","threshold","currentThreshold","isProcessingTranscriptionQueue","item","shift","processTranscription","buildPrompt","promptParts","push","previousResults","Array","from","entries","filter","_ref","sort","_ref2","_ref3","a","b","map","_ref4","_result$transcribeEve","transcribeEvent","Boolean","join","_this$callbacks$onTra","_this$callbacks5","prompt","promise","transcribeData","onProgress","endTime","isCapturing","isRecording","processTime","recordingTime","memoryUsage","getMemoryUsage","sampleCount","isProcessed","isReleased","onTranscribe","delete","_this$callbacks$onTra2","_this$callbacks6","errorEvent","_this$callbacks$onErr","_this$callbacks7","updateCallbacks","updateVadOptions","updateAutoSliceOptions","getStatistics","audioStats","accumulatedSamples","vadStats","enabled","contextAvailable","sliceStats","autoSliceConfig","getTranscriptionResults","values","_this$callbacks$onTra3","_this$callbacks8","startEvent","forceNextSlice","cancel","clear","release","_this$wavFileWriter","eventType","currentStats","shouldEmitStatsUpdate","_this$callbacks$onSta4","_this$callbacks9","statsEvent","onStatsUpdate","current","previous","_current$sliceStats","_current$sliceStats$m","_previous$sliceStats","_previous$sliceStats$","currentMemory","estimatedMB","previousMemory","memoryDiff","abs"],"sourceRoot":"../../../src","sources":["realtime-transcription/RealtimeTranscriber.ts"],"mappings":"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"}
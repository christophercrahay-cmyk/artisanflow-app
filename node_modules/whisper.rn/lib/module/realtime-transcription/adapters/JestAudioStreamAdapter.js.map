{"version":3,"names":["JestAudioStreamAdapter","config","isInitialized","recording","chunksSent","startTime","constructor","options","arguments","length","undefined","sampleRate","channels","bitsPerSample","simulateLatency","simulateErrors","chunkSize","chunkInterval","maxChunks","generateSilence","initialize","release","delay","simulateStartErrorOnly","Error","start","_this$statusCallback","Date","now","statusCallback","call","startStreaming","stop","_this$statusCallback2","streamInterval","clearTimeout","isRecording","onData","callback","dataCallback","onError","errorCallback","onStatusChange","simulateError","error","_this$errorCallback","simulateDataChunk","data","streamData","timestamp","getChunksSent","getTotalBytesStreamed","getStreamDuration","streamChunk","audioData","generateAudioChunk","setTimeout","startByte","endByte","Math","min","subarray","Uint8Array","fill","frequency","samplesPerChunk","timeOffset","i","time","amplitude","sin","PI","sample","round","floor","ms","Promise","resolve"],"sourceRoot":"../../../../src","sources":["realtime-transcription/adapters/JestAudioStreamAdapter.ts"],"mappings":"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"}
{"version":3,"names":["_SliceManager","require","_WavFileWriter","_types","RealtimeTranscriber","callbacks","isActive","isTranscribing","vadEnabled","transcriptionQueue","accumulatedData","Uint8Array","wavFileWriter","lastSpeechDetectedTime","lastVadState","lastStatsSnapshot","transcriptionResults","Map","vadEvents","constructor","dependencies","options","arguments","length","undefined","whisperContext","vadContext","audioStream","fs","audioSliceSec","audioMinSec","maxSlicesInMemory","vadOptions","VAD_PRESETS","default","vadPreset","autoSliceOnSpeechEnd","autoSliceThreshold","transcribeOptions","initialPrompt","promptPreviousSlices","audioOutputPath","logger","sliceManager","SliceManager","onData","handleAudioData","bind","onError","handleError","onStatusChange","handleAudioStatusChange","start","Error","_this$callbacks$onSta","_this$callbacks","_this$options$audioSt4","_this$options$audioSt5","_this$options$audioSt6","_this$options$audioSt7","_this$options$audioSt8","call","reset","_this$options$audioSt","_this$options$audioSt2","_this$options$audioSt3","WavFileWriter","sampleRate","audioStreamConfig","channels","bitsPerSample","initialize","audioSource","bufferSize","emitStatsUpdate","log","error","_this$callbacks$onSta2","_this$callbacks2","stop","_this$callbacks$onSta3","_this$callbacks3","processAccumulatedDataForSliceManagement","processTranscriptionQueue","finalize","streamData","appendAudioData","data","catch","accumulateAudioData","errorMessage","message","newData","combined","set","minBufferSamples","result","addAudioData","slice","index","processSliceVAD","queueSliceForTranscription","checkAutoSlice","vadEvent","_slice","shouldTriggerAutoSlice","type","currentSliceInfo","getCurrentSliceInfo","currentSlice","getSliceByIndex","currentSliceIndex","currentDuration","Date","now","startTime","targetDuration","minDuration","meetsMinDuration","meetsThreshold","toFixed","nextSlice","_this$callbacks$onVad","_this$callbacks4","audioData","getAudioDataForTranscription","detectSpeech","timestamp","onVad","isSpeech","isSpeechEnd","speechDuration","onBeginTranscribe","shouldTranscribe","sliceIndex","duration","get","unshift","currentTimestamp","vadEventType","confidence","audioBuffer","buffer","vadSegments","detectSpeechData","_vadSegments","totalTime","reduce","sum","segment","t1","t0","audioDuration","Math","min","threshold","currentThreshold","isProcessingTranscriptionQueue","item","shift","processTranscription","buildPrompt","promptParts","push","previousResults","Array","from","entries","filter","_ref","sort","_ref2","_ref3","a","b","map","_ref4","_result$transcribeEve","transcribeEvent","Boolean","join","_this$callbacks$onTra","_this$callbacks5","prompt","promise","transcribeData","onProgress","endTime","isCapturing","isRecording","processTime","recordingTime","memoryUsage","getMemoryUsage","sampleCount","isProcessed","isReleased","onTranscribe","delete","_this$callbacks$onTra2","_this$callbacks6","errorEvent","_this$callbacks$onErr","_this$callbacks7","updateCallbacks","updateVadOptions","updateAutoSliceOptions","getStatistics","audioStats","accumulatedSamples","vadStats","enabled","contextAvailable","sliceStats","autoSliceConfig","getTranscriptionResults","values","_this$callbacks$onTra3","_this$callbacks8","startEvent","forceNextSlice","cancel","clear","release","_this$wavFileWriter","eventType","currentStats","shouldEmitStatsUpdate","_this$callbacks$onSta4","_this$callbacks9","statsEvent","onStatsUpdate","current","previous","_current$sliceStats","_current$sliceStats$m","_previous$sliceStats","_previous$sliceStats$","currentMemory","estimatedMB","previousMemory","memoryDiff","abs","exports"],"sourceRoot":"../../../src","sources":["realtime-transcription/RealtimeTranscriber.ts"],"mappings":"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"}
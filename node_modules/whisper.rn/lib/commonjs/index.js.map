{"version":3,"names":["_reactNative","require","_NativeRNWhisper","_interopRequireDefault","_AudioSessionIos","_version","_RNWhisper$getConstan","obj","__esModule","default","jsiWhisperTranscribeData","jsiWhisperVadDetectSpeech","jsiInstalled","installJSIBindingsIfNeeded","RNWhisper","installJSIBindings","then","global","whisperTranscribeData","whisperVadDetectSpeech","catch","e","console","warn","EventEmitter","Platform","OS","NativeEventEmitter","DeviceEventEmitter","EVENT_ON_TRANSCRIBE_PROGRESS","EVENT_ON_TRANSCRIBE_NEW_SEGMENTS","EVENT_ON_NATIVE_LOG","EVENT_ON_REALTIME_TRANSCRIBE","EVENT_ON_REALTIME_TRANSCRIBE_END","logListeners","_RNWhisper$toggleNati","_RNWhisper$toggleNati2","_RNWhisper$toggleNati3","addListener","evt","forEach","listener","level","text","toggleNativeLog","call","updateAudioSession","setting","AudioSessionIos","setCategory","category","options","mode","setMode","setActive","active","WhisperContext","gpu","reasonNoGPU","constructor","_ref","contextPtr","contextId","ptr","id","transcribeWithNativeMethod","method","data","arguments","length","undefined","jobId","Math","floor","random","onProgress","onNewSegments","rest","progressListener","lastProgress","progress","removeProgressListener","remove","newSegmentsListener","result","removeNewSegmenetsListener","stop","abortTranscribe","promise","isAborted","transcribe","filePathOrBase64","path","source","Image","resolveAssetSource","uri","Error","startsWith","slice","transcribeData","ArrayBuffer","transcribeDataArrayBuffer","jsiOptions","error","transcribeRealtime","lastTranscribePayload","slices","sliceIndex","tOffset","putSlice","payload","isUseSlices","_slices$sliceIndex","_segments","segments","t1","map","segment","t0","mergeSlicesIfNeeded","mergedPayload","_mergedPayload$data","_slice$data","_mergedPayload$data2","_slice$data2","processTime","recordingTime","prevAudioSession","audioSessionOnStartIos","audioSessionOnStopIos","categoryResult","getCurrentCategory","getCurrentMode","startRealtimeTranscribe","subscribe","callback","transcribeListener","endListener","lastPayload","isCapturing","bench","maxThreads","config","nThreads","encodeMs","decodeMs","batchMs","promptMs","JSON","parse","release","releaseContext","exports","coreMLModelAssetPaths","initWhisper","_ref2","filePath","coreMLModelAsset","isBundleAsset","useGpu","useCoreMLIos","useFlashAttn","coreMLAssets","filename","assets","asset","filepath","find","p","includes","filter","initContext","downloadCoreMLAssets","__DEV__","releaseAllWhisper","releaseAllContexts","libVersion","version","useCoreML","coreMLAllowFallback","getConstants","isUseCoreML","isCoreMLAllowFallback","WhisperVadContext","_ref3","detectSpeech","vadDetectSpeech","vadDetectSpeechFile","detectSpeechData","audioData","releaseVadContext","initWhisperVad","_ref4","initVadContext","releaseAllWhisperVad","releaseAllVadContexts","logInitialized","enabled","addNativeLogListener","push","splice","indexOf"],"sourceRoot":"../../src","sources":["index.ts"],"mappings":"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"}